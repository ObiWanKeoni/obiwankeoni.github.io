<div>
  <button class="toggle-theme">
    <i class="lni lni-night"></i>
  </button>
</div>


<script>
function setTheme(theme) {
  const toggleDarkMode = document.querySelector('.toggle-theme');
  jtd.setTheme(theme);
  switch(theme) {
    case 'catppuccin-light':
      toggleDarkMode.innerHTML = '<i class="lni lni-sun"></i>';
      break;
    case 'catppuccin':
      toggleDarkMode.innerHTML = '<i class="lni lni-night"></i>';
      break;
    default:
      toggleDarkMode.innerHTML = '<i class="lni lni-sun"></i>';
      break;
  }
  hljs.highlightAll();
}

prefers_dark_theme = window.matchMedia('(prefers-color-scheme: dark)');
prefers_dark_theme.addEventListener('change', event => {
  const newColorScheme = event.matches ? "catppuccin" : "catppuccin-light";
  setTheme(newColorScheme);
});
const newColorScheme = prefers_dark_theme.matches ? "catppuccin" : "catppuccin-light";
setTheme(newColorScheme);

jtd.addEvent(document.querySelector('.toggle-theme'), 'click', function(){
  if (jtd.getTheme() === 'catppuccin') {
    setTheme('catppuccin-light')
  } else {
    setTheme('catppuccin');
  }
});
</script>
